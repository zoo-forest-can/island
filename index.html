<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·¯å¦æœƒ - éŠæˆ²å¹³å°</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: linear-gradient(135deg, #FFF9F0 0%, #FFF0E5 100%);
            color: #5D4E3A;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            padding: 0 20px;
        }

        /* ========== Header ========== */
        header {
            background: linear-gradient(135deg, #FF6B4A 0%, #F39C12 100%);
            padding: 60px 20px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        header::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -5%;
            width: 250px;
            height: 250px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: float 8s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        h1 {
            font-size: 3.5rem;
            font-weight: 900;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header-subtitle {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            opacity: 0.95;
        }

        .header-decoration {
            font-size: 2.5rem;
            position: relative;
            z-index: 1;
            letter-spacing: 10px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* ========== Games Section ========== */
        .games-section {
            padding: 60px 20px;
            flex: 1;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 60px;
        }

        @media (max-width: 768px) {
            .games-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        .game-card {
            background: #FFFFFF;
            border-radius: 20px;
            padding: 40px;
            border: 2px solid #F0E8DC;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .game-card-emoji {
            font-size: 4rem;
            margin-bottom: 15px;
            display: inline-block;
        }

        .game-card h2 {
            color: #2C3E50;
            font-size: 1.6rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .game-card-subtitle {
            color: #FF6B4A;
            font-size: 0.95rem;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .game-card p {
            color: #5D4E3A;
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1rem;
        }

        .game-btn {
            display: inline-block;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            color: white;
            font-family: 'Noto Sans TC', sans-serif;
        }

        .game-btn-coral {
            background: #FF6B4A;
        }

        .game-btn-coral:hover {
            background: #FF5535;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(255, 107, 74, 0.3);
        }

        .game-btn-mint {
            background: #4ECDC4;
        }

        .game-btn-mint:hover {
            background: #3DBAB2;
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(78, 205, 196, 0.3);
        }

        /* ========== Leaderboard Section ========== */
        .leaderboard-section {
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .leaderboard-title {
            text-align: center;
            font-size: 2rem;
            color: #2C3E50;
            margin-bottom: 40px;
            font-weight: 700;
        }

        .leaderboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .leaderboard-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        .leaderboard-card {
            background: #FFFFFF;
            border-radius: 15px;
            padding: 25px;
            border: 2px solid #F0E8DC;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .leaderboard-card h3 {
            color: #2C3E50;
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        .leaderboard-table thead {
            background: linear-gradient(90deg, #FF6B4A 0%, #F39C12 100%);
            color: white;
        }

        .leaderboard-table th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .leaderboard-table td {
            padding: 12px;
            border-bottom: 1px solid #F0E8DC;
        }

        .leaderboard-table tbody tr:nth-child(odd) {
            background: #FFF9F0;
        }

        .leaderboard-table tbody tr:nth-child(even) {
            background: white;
        }

        .leaderboard-rank {
            font-weight: 700;
            color: #FF6B4A;
            min-width: 30px;
        }

        .leaderboard-medal {
            font-size: 1.2rem;
            margin-right: 5px;
        }

        .rank-1 {
            background: linear-gradient(90deg, #FFD700 0%, #FFC700 100%);
            color: #8B6914;
        }

        .rank-2 {
            background: linear-gradient(90deg, #C0C0C0 0%, #E8E8E8 100%);
            color: #666;
        }

        .rank-3 {
            background: linear-gradient(90deg, #CD7F32 0%, #D4A574 100%);
            color: #5C4033;
        }

        .leaderboard-empty {
            text-align: center;
            padding: 40px;
            color: #999;
            font-size: 1rem;
        }

        .reset-btn-container {
            text-align: center;
            margin-top: 20px;
        }

        .reset-btn {
            padding: 8px 16px;
            background: #FF6B4A;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-family: 'Noto Sans TC', sans-serif;
            transition: all 0.3s ease;
        }

        .reset-btn:hover {
            background: #FF5535;
            transform: scale(1.05);
        }

        /* ========== Footer ========== */
        footer {
            background: linear-gradient(135deg, #2C3E50 0%, #34495E 100%);
            color: white;
            text-align: center;
            padding: 25px;
            margin-top: auto;
            font-size: 0.95rem;
        }

        /* ========== Responsive ========== */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }

            .header-subtitle {
                font-size: 1rem;
            }

            .header-decoration {
                font-size: 2rem;
                letter-spacing: 5px;
            }

            .game-card {
                padding: 25px;
            }

            .leaderboard-table {
                font-size: 0.85rem;
            }

            .leaderboard-table th,
            .leaderboard-table td {
                padding: 8px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <h1>è·¯å¦æœƒ</h1>
        <p class="header-subtitle">æŒ‘æˆ°æœ€é«˜åˆ†ï¼Œç™»ä¸Šæ’è¡Œæ¦œï¼</p>
        <div class="header-decoration">ğŸï¸ ğŸ° ğŸ¶ ğŸ± ğŸ¯ ğŸ»</div>
    </header>

    <!-- Games Section -->
    <div class="games-section">
        <div class="container">
            <div class="games-grid">
                <!-- Game Card 1 -->
                <div class="game-card">
                    <div class="game-card-emoji">ğŸ¯ğŸ¾</div>
                    <h2>å‹•ç‰©åˆç›’æ¨‚</h2>
                    <p class="game-card-subtitle">ç–Šç–Šåˆé«”çš„ç”Ÿè‚–å°éŠæˆ²</p>
                    <p>æŠŠå‹•ç‰©å¾€ä¸‹ä¸Ÿï¼Œè®“ç›¸åŒçš„ç”Ÿè‚–åˆé«”é€²åŒ–ï¼å †è¶Šé«˜ï¼Œåˆ†æ•¸è¶Šé«˜ï½</p>
                    <a href="games/amhz.html" class="game-btn game-btn-coral">ç«‹åˆ»æŒ‘æˆ° â–¶</a>
                </div>

                <!-- Game Card 2 -->
                <div class="game-card">
                    <div class="game-card-emoji">âš¾ğŸ»</div>
                    <h2>å‹•ç‰©è½Ÿä¸è®“</h2>
                    <p class="game-card-subtitle">ç”Ÿè‚–æ£’çƒå…¨å£˜æ‰“æŒ‘æˆ°</p>
                    <p>é¸ä½ çš„ç”Ÿè‚–é¸æ‰‹ï¼ŒçŒ›æ‰“å…¨å£˜æ‰“ï¼5å›åˆæŒ‘æˆ°ï¼Œæ‰“å‡ºæœ€é«˜åˆ†ï¼</p>
                    <a href="games/bb.html" class="game-btn game-btn-mint">ç«‹åˆ»æŒ‘æˆ° â–¶</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaderboard Section -->
    <div class="container">
        <div class="leaderboard-section">
            <h2 class="leaderboard-title">ğŸ† é«˜æ‰‹æ’è¡Œæ¦œ</h2>

            <div class="leaderboard-grid">
                <!-- Leaderboard 1: Animal Merge -->
                <div class="leaderboard-card">
                    <h3>ğŸ¯ å‹•ç‰©åˆç›’æ¨‚</h3>
                    <div id="leaderboard-amhz-container">
                        <table class="leaderboard-table" id="leaderboard-amhz">
                            <thead>
                                <tr>
                                    <th>æ’å</th>
                                    <th>ç©å®¶åç¨±</th>
                                    <th>åˆ†æ•¸</th>
                                    <th>æ—¥æœŸ</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-amhz-body">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                        <div class="leaderboard-empty" id="leaderboard-amhz-empty">
                            é‚„æ²’æœ‰é«˜æ‰‹è¨˜éŒ„ï¼Œå¿«å»æŒ‘æˆ°å§ï¼ğŸ®
                        </div>
                    </div>
                </div>

                <!-- Leaderboard 2: Baseball -->
                <div class="leaderboard-card">
                    <h3>âš¾ å‹•ç‰©è½Ÿä¸è®“</h3>
                    <div id="leaderboard-bb-container">
                        <table class="leaderboard-table" id="leaderboard-bb">
                            <thead>
                                <tr>
                                    <th>æ’å</th>
                                    <th>ç©å®¶åç¨±</th>
                                    <th>åˆ†æ•¸</th>
                                    <th>æ—¥æœŸ</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-bb-body">
                                <!-- Data will be populated by JavaScript -->
                            </tbody>
                        </table>
                        <div class="leaderboard-empty" id="leaderboard-bb-empty">
                            é‚„æ²’æœ‰é«˜æ‰‹è¨˜éŒ„ï¼Œå¿«å»æŒ‘æˆ°å§ï¼ğŸ®
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reset Button -->
            <div class="reset-btn-container">
                <button class="reset-btn" onclick="resetLeaderboards()">é‡ç½®æ’è¡Œæ¦œ</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <p>Â© 2026 è·¯å¦æœƒ Â· å¿«æ¨‚éŠç©ï¼Œæ°¸é ç¬¬ä¸€ï¼</p>
    </footer>

    <script>
        const FB_URL = 'https://zoo-forest-7132c-default-rtdb.asia-southeast1.firebasedatabase.app';
        const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];

        async function fetchFirebaseLb(path) {
            try {
                const res  = await fetch(`${FB_URL}/${path}.json`);
                const data = await res.json();
                if (!data) return [];
                return Object.values(data)
                    .filter(e => e && e.score != null)
                    .sort((a, b) => b.score - a.score)
                    .slice(0, 10);
            } catch {
                const key = path === 'lb_amhz' ? 'platform_amhz_lb' : 'platform_bb_lb';
                try { return JSON.parse(localStorage.getItem(key) || '[]'); } catch { return []; }
            }
        }

        function formatDate(dateString) {
            if (!dateString) return 'æœªçŸ¥';
            const date = new Date(dateString);
            if (isNaN(date)) return dateString;
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day   = String(date.getDate()).padStart(2, '0');
            return `${month}/${day}`;
        }

        function renderLb(records, tableBodyId, emptyId) {
            const tbody    = document.getElementById(tableBodyId);
            const emptyMsg = document.getElementById(emptyId);
            const table    = tbody.parentElement;
            tbody.innerHTML = '';
            if (!records || records.length === 0) {
                table.style.display = 'none';
                emptyMsg.style.display = 'block';
                return;
            }
            table.style.display = 'table';
            emptyMsg.style.display = 'none';
            records.slice(0, 10).forEach((record, index) => {
                const rank = index + 1;
                const row  = document.createElement('tr');
                if (rank <= 3) row.className = `rank-${rank}`;
                const rankCell  = document.createElement('td');
                rankCell.className = 'leaderboard-rank';
                rankCell.innerHTML = rank <= 3 ? `<span class="leaderboard-medal">${medals[rank-1]}</span>${rank}` : rank;
                const nameCell  = document.createElement('td');
                nameCell.textContent = record.name || 'æœªçŸ¥ç©å®¶';
                const scoreCell = document.createElement('td');
                scoreCell.textContent = record.score;
                const dateCell  = document.createElement('td');
                dateCell.textContent = formatDate(record.date);
                row.appendChild(rankCell);
                row.appendChild(nameCell);
                row.appendChild(scoreCell);
                row.appendChild(dateCell);
                tbody.appendChild(row);
            });
        }

        async function loadAll() {
            const [amhz, bb] = await Promise.all([
                fetchFirebaseLb('lb_amhz'),
                fetchFirebaseLb('lb_bb')
            ]);
            renderLb(amhz, 'leaderboard-amhz-body', 'leaderboard-amhz-empty');
            renderLb(bb,   'leaderboard-bb-body',   'leaderboard-bb-empty');
        }

        async function resetLeaderboards() {
            if (!confirm('ç¢ºå®šè¦é‡ç½®æ‰€æœ‰æ’è¡Œæ¦œç´€éŒ„ï¼Ÿï¼ˆåŒ…å«é›²ç«¯è³‡æ–™ï¼‰')) return;
            await Promise.all([
                fetch(`${FB_URL}/lb_amhz.json`, { method: 'DELETE' }).catch(()=>{}),
                fetch(`${FB_URL}/lb_bb.json`,   { method: 'DELETE' }).catch(()=>{}),
            ]);
            localStorage.removeItem('platform_amhz_lb');
            localStorage.removeItem('platform_bb_lb');
            loadAll();
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadAll();
            setInterval(loadAll, 10000);
        });
    </script>
</body>
</html>
